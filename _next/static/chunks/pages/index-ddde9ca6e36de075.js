(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9287)}])},7328:(e,r,t)=>{e.exports=t(9836)},9287:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var o=t(7876),i=t(4232),n=t(7328),l=t.n(n);let d={売上:[{id:"customers",name:"顧客数",description:"売上を生み出す顧客の総数。新規・既存に分けて管理することが重要です。",formula:"売上 = 顧客数 \xd7 顧客単価",examples:["月間アクティブユーザー数","契約企業数","会員数"],category:"customer"},{id:"customer_price",name:"顧客単価",description:"一人の顧客が平均的に支払う金額。LTV（顧客生涯価値）の基礎となります。",formula:"売上 = 顧客数 \xd7 顧客単価",examples:["ARPU（Average Revenue Per User）","平均注文金額","契約単価"],category:"revenue"},{id:"contracts",name:"成約数",description:"実際に契約や購入に至った件数。成約率と組み合わせて分析します。",formula:"売上 = 成約数 \xd7 平均契約金額",examples:["月間成約件数","新規契約数","オーダー数"],category:"revenue"}],顧客数:[{id:"new_customers",name:"新規顧客数",description:"新たに獲得した顧客の数。成長の原動力となる重要指標です。",formula:"顧客数 = 新規顧客数 + 既存顧客数",examples:["月間新規登録数","新規契約企業数","初回購入者数"],category:"customer"},{id:"existing_customers",name:"既存顧客数",description:"継続利用している顧客の数。リテンション率と密接に関係します。",formula:"顧客数 = 新規顧客数 + 既存顧客数",examples:["アクティブユーザー数","継続契約数","リピーター数"],category:"customer"}],成約数:[{id:"proposals",name:"提案数",description:"顧客に対して行った提案の数。商談機会の創出力を表します。",formula:"成約数 = 提案数 \xd7 提案成約率",examples:["見積提出数","プレゼン実施数","商談数"],category:"marketing"}]};function s(){var e;let[r,t]=(0,i.useState)(null),[n,s]=(0,i.useState)(null),[a,c]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[f,g]=(0,i.useState)(null),[x,b]=(0,i.useState)({x:0,y:0}),[y,j]=(0,i.useState)(0),[v,C]=(0,i.useState)({parentValue:"",childEstimate:""}),k=(0,i.useRef)(null),S=e=>{s(e),c(!0)},w=(e,o)=>{if(!r)return;let i="node-".concat(Date.now()),n=r.nodes[e],l={id:i,name:o.name||"新しいKPI",level:n.level+1,x:n.x+200*n.children.length-100,y:n.y+150,children:[],parent:e,description:o.description,formula:o.formula},d={...n,children:[...n.children,i]},a={...r.nodes,[e]:d,[i]:l};t({...r,nodes:a}),s(l)},z=(e,o)=>{if(!r)return;let i={...r.nodes,[e]:{...r.nodes[e],...o}};t({...r,nodes:i})},I=e=>{let r=prompt("KPI名を入力してください:",e.name);r&&r!==e.name&&z(e.id,{name:r})},B=(e,t)=>{r.nodes[t];let o=e.currentTarget.getBoundingClientRect();g(t),b({x:e.clientX-o.left,y:e.clientY-o.top})},W=()=>{g(null)},P=n&&d[n.name]||[];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l(),{children:[(0,o.jsx)("title",{children:"インテリジェントKPIツリー作成ツール"}),(0,o.jsx)("meta",{name:"description",content:"AIによるヒント機能付きKPIツリー作成ツール"}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,o.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"#f8fafc",fontFamily:"system-ui, sans-serif"},children:[(0,o.jsx)("header",{style:{backgroundColor:"white",borderBottom:"1px solid #e2e8f0",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:(0,o.jsxs)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"0 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",height:"4rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("h1",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#2563eb",margin:0},children:"インテリジェントKPIツリー"}),r&&(0,o.jsx)("span",{style:{marginLeft:"1rem",fontSize:"0.875rem",color:"#64748b"},children:r.name})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)("button",{style:{padding:"0.375rem 0.75rem",borderRadius:"0.375rem",fontWeight:"500",fontSize:"0.75rem",border:"1px solid #e2e8f0",cursor:"pointer",backgroundColor:n?"#f8fafc":"#f1f5f9",color:"#0f172a"},onClick:()=>n&&u(!0),disabled:!n,children:"数値設定"}),(0,o.jsx)("button",{style:{padding:"0.375rem 0.75rem",borderRadius:"0.375rem",fontWeight:"500",fontSize:"0.75rem",border:"none",cursor:"pointer",backgroundColor:"#2563eb",color:"white"},children:"レポート生成"})]})]})}),(0,o.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 4rem)"},children:[(0,o.jsx)("div",{style:{flex:1,position:"relative"},children:r&&Object.keys(r.nodes).length>0?(0,o.jsx)("div",{ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"auto",backgroundColor:"#f9fafb"},onMouseMove:e=>{if(!f||!k.current)return;let r=k.current.getBoundingClientRect();z(f,{x:e.clientX-r.left-x.x,y:e.clientY-r.top-x.y})},onMouseUp:W,onMouseLeave:W,children:(0,o.jsxs)("div",{style:{position:"absolute",inset:0,minWidth:"1200px",minHeight:"800px"},children:[(0,o.jsx)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1},children:Object.values(r.nodes).map(e=>e.children.map(t=>{let i=r.nodes[t];if(!i)return null;let n=e.x+100,l=e.y+40,d=i.x+100,s=i.y+40;return(0,o.jsxs)("g",{children:[(0,o.jsx)("line",{x1:n,y1:l,x2:d,y2:s,stroke:"#e2e8f0",strokeWidth:"2"}),(0,o.jsx)("polygon",{points:"".concat(d-5,",").concat(s-5," ").concat(d+5,",").concat(s-5," ").concat(d,",").concat(s+5),fill:"#e2e8f0"})]},"connection-".concat(e.id,"-").concat(i.id))}))}),Object.values(r.nodes).map(e=>{let r=(null==n?void 0:n.id)===e.id;return(0,o.jsxs)("div",{style:{position:"absolute",left:e.x,top:e.y,width:"200px",minHeight:"80px",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:r?"0 10px 15px -3px rgb(0 0 0 / 0.1)":"0 4px 6px -1px rgb(0 0 0 / 0.1)",border:"2px solid ".concat(r?"#2563eb":"#e2e8f0"),cursor:"pointer",zIndex:2,transition:"all 0.2s ease"},onClick:()=>S(e),onDoubleClick:()=>I(e),onMouseDown:r=>B(r,e.id),children:[(0,o.jsxs)("div",{style:{padding:"0.75rem"},children:[(0,o.jsx)("div",{style:{fontWeight:"600",fontSize:"0.875rem",marginBottom:"0.25rem",color:"#2563eb"},children:e.name}),e.description&&(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.5rem"},children:e.description}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.75rem"},children:[e.value&&(0,o.jsxs)("div",{style:{color:"#10b981",fontWeight:"500"},children:["実績: ",e.value,e.unit||""]}),e.target&&(0,o.jsxs)("div",{style:{color:"#f59e0b",fontWeight:"500"},children:["目標: ",e.target,e.unit||""]})]}),e.formula&&(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem",fontStyle:"italic"},children:e.formula})]}),(0,o.jsx)("button",{style:{position:"absolute",bottom:"-0.75rem",left:"50%",transform:"translateX(-50%)",width:"1.5rem",height:"1.5rem",backgroundColor:"#2563eb",color:"white",borderRadius:"50%",fontSize:"0.75rem",border:"none",cursor:"pointer"},onClick:r=>{r.stopPropagation();let t=prompt("KPI名を入力してください:");t&&w(e.id,{name:t})},title:"子KPIを追加",children:"+"})]},e.id)})]})}):(0,o.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\uD83C\uDF33"}),(0,o.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem",color:"#0f172a"},children:"KPIツリーを作成しましょう"}),(0,o.jsx)("p",{style:{color:"#64748b",marginBottom:"1.5rem",fontSize:"1rem"},children:"最初のKPIを追加してツリーの構築を開始します"}),(0,o.jsx)("button",{onClick:()=>{let e={id:"root",name:"売上",level:0,x:400,y:100,children:[],description:"ビジネスの主要目標指標"};t({id:"tree-1",name:"新規KPIツリー",nodes:{root:e},rootNodeId:"root"}),s(e),c(!0)},style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"500",fontSize:"1rem",border:"none",cursor:"pointer",backgroundColor:"#2563eb",color:"white",transition:"all 0.2s ease-in-out"},onMouseOver:e=>e.target.style.backgroundColor="#1d4ed8",onMouseOut:e=>e.target.style.backgroundColor="#2563eb",children:"ルートKPIを追加"})]})})}),a&&n&&(0,o.jsx)("div",{style:{width:"320px",borderLeft:"1px solid #e2e8f0",backgroundColor:"white",overflowY:"auto"},children:(0,o.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",borderBottom:"1px solid #e2e8f0"},children:[(0,o.jsx)("h3",{style:{fontWeight:"600",fontSize:"1.125rem",margin:0},children:"KPIヒント"}),(0,o.jsx)("button",{onClick:()=>c(!1),style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"1rem"},children:"✕"})]}),(0,o.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderBottom:"1px solid #e2e8f0"},children:[(0,o.jsx)("div",{style:{fontWeight:"500",color:"#2563eb",marginBottom:"0.25rem"},children:n.name}),n.description&&(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:n.description})]}),(0,o.jsx)("div",{style:{flex:1,overflowY:"auto"},children:P.length>0?(0,o.jsxs)("div",{style:{padding:"1rem"},children:[(0,o.jsxs)("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.75rem"},children:["「",n.name,"」の下位KPI候補:"]}),P.map(e=>(0,o.jsxs)("div",{style:{border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"0.75rem",cursor:"pointer",backgroundColor:h===e.id?"#f8fafc":"white"},onClick:()=>p(h===e.id?null:e.id),children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsx)("div",{style:{fontWeight:"500",color:"#2563eb"},children:e.name}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",padding:"0.125rem 0.5rem",backgroundColor:"#2563eb",color:"white",borderRadius:"0.25rem"},children:"customer"===e.category?"顧客":"revenue"===e.category?"売上":"マーケ"})]}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:e.description}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#2563eb",fontFamily:"monospace",backgroundColor:"#f8fafc",padding:"0.25rem 0.5rem",borderRadius:"0.25rem"},children:e.formula}),h===e.id&&(0,o.jsxs)("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid #e2e8f0"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"具体例:"}),(0,o.jsx)("ul",{style:{fontSize:"0.875rem",color:"#64748b",paddingLeft:"1rem",marginBottom:"0.75rem"},children:e.examples.map((e,r)=>(0,o.jsx)("li",{style:{marginBottom:"0.25rem"},children:e},r))}),(0,o.jsx)("button",{style:{width:"100%",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",fontWeight:"500",fontSize:"0.75rem",border:"none",cursor:"pointer",backgroundColor:"#2563eb",color:"white"},onClick:()=>w(n.id,e),children:"このKPIを追加"})]})]},e.id))]}):(0,o.jsxs)("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:[(0,o.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:"\uD83D\uDCA1"}),(0,o.jsxs)("div",{style:{fontSize:"0.875rem"},children:["このKPIのヒントは現在準備中です。",(0,o.jsx)("br",{}),"手動で子KPIを追加することができます。"]}),(0,o.jsx)("button",{style:{marginTop:"0.75rem",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",fontWeight:"500",fontSize:"0.75rem",border:"1px solid #e2e8f0",cursor:"pointer",backgroundColor:"#f8fafc",color:"#0f172a"},onClick:()=>{let e=prompt("KPI名を入力してください:");e&&w(n.id,{name:e})},children:"手動でKPIを追加"})]})}),(0,o.jsx)("div",{style:{padding:"1rem",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:"\uD83D\uDCA1 ヒント: KPIをダブルクリックして名前を編集できます"})})]})})]}),m&&n&&(0,o.jsx)("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",maxWidth:"28rem",width:"100%",margin:"1rem",maxHeight:"90vh",overflowY:"auto"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.5rem",borderBottom:"1px solid #e2e8f0"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",margin:0},children:["数値設定 - ",n.name]}),(0,o.jsx)("button",{onClick:()=>{u(!1),j(0)},style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"1rem"},children:"✕"})]}),0===y?(0,o.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"目標値"}),(0,o.jsx)("input",{type:"number",style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"0.875rem"},value:n.target||"",onChange:e=>z(n.id,{target:parseFloat(e.target.value)||void 0}),placeholder:"目標値を入力"})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"実績値"}),(0,o.jsx)("input",{type:"number",style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"0.875rem"},value:n.value||"",onChange:e=>z(n.id,{value:parseFloat(e.target.value)||void 0}),placeholder:"現在の実績値を入力"})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"単位"}),(0,o.jsx)("input",{type:"text",style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"0.875rem"},value:n.unit||"",onChange:e=>z(n.id,{unit:e.target.value}),placeholder:"例: 円、件、人"})]}),(0,o.jsxs)("div",{style:{backgroundColor:"#f8fafc",borderRadius:"0.5rem",padding:"1rem"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"\uD83E\uDD16 インテリジェント計算"}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.75rem"},children:"上位KPIの情報から自動的に目標値を算出します"}),(0,o.jsx)("button",{style:{padding:"0.375rem 0.75rem",borderRadius:"0.375rem",fontWeight:"500",fontSize:"0.75rem",border:"1px solid #e2e8f0",cursor:"pointer",backgroundColor:"#f8fafc",color:"#0f172a"},onClick:()=>j(1),children:"計算アシスタントを使用"})]})]}):(0,o.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[(0,o.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\uD83E\uDDEE"}),(0,o.jsx)("div",{style:{fontWeight:"500"},children:"インテリジェント計算"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"いくつかの質問にお答えください"})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["上位KPI「",n.parent?(null==(e=r.nodes[n.parent])?void 0:e.name)||"Parent KPI":"売上","」の目標値はいくらですか？"]}),(0,o.jsx)("input",{type:"number",style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"0.875rem"},value:v.parentValue,onChange:e=>C(r=>({...r,parentValue:e.target.value})),placeholder:"例: 5000万円の場合は 50000000"})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["過去の「",n.name,"」の平均値はいくらでしたか？"]}),(0,o.jsx)("input",{type:"number",style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"0.875rem"},value:v.childEstimate,onChange:e=>C(r=>({...r,childEstimate:e.target.value})),placeholder:"例: 平均単価50万円の場合は 500000"})]}),(0,o.jsx)("div",{style:{backgroundColor:"#dbeafe",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"1rem"},children:(0,o.jsx)("div",{style:{fontSize:"0.875rem"},children:"\uD83D\uDCA1 計算例: 売上5000万円 \xf7 平均単価50万円 = 目標件数100件"})}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,o.jsx)("button",{style:{flex:1,padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"1px solid #e2e8f0",cursor:"pointer",backgroundColor:"#f8fafc",color:"#0f172a"},onClick:()=>j(0),children:"戻る"}),(0,o.jsx)("button",{style:{flex:1,padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:v.parentValue&&v.childEstimate?"pointer":"not-allowed",backgroundColor:v.parentValue&&v.childEstimate?"#2563eb":"#9ca3af",color:"white"},onClick:()=>{let e=parseFloat(v.parentValue),r=parseFloat(v.childEstimate);if(e&&r){let t=Math.round(e/r);z(n.id,{target:t}),j(0),u(!1)}},disabled:!v.parentValue||!v.childEstimate,children:"計算実行"})]})]}),0===y&&(0,o.jsxs)("div",{style:{display:"flex",gap:"0.75rem",padding:"1.5rem",borderTop:"1px solid #e2e8f0"},children:[(0,o.jsx)("button",{style:{flex:1,padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"1px solid #e2e8f0",cursor:"pointer",backgroundColor:"#f8fafc",color:"#0f172a"},onClick:()=>{u(!1),j(0)},children:"キャンセル"}),(0,o.jsx)("button",{style:{flex:1,padding:"0.5rem 1rem",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:"pointer",backgroundColor:"#2563eb",color:"white"},onClick:()=>u(!1),children:"保存"})]})]})})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(2936)),_N_E=e.O()}]);